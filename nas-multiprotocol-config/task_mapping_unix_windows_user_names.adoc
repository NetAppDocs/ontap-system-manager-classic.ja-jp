---
permalink: nas-multiprotocol-config/task_mapping_unix_windows_user_names.html 
sidebar: sidebar 
keywords: windows, unix, user, acconut, map, user, access, file, permission, ntfs, conversion, rule, default, user, map unix and windows user names 
summary: Windows と UNIX の両方のユーザアカウントが混在するサイトでは、 UNIX ファイル権限が設定されたファイルに Windows ユーザがアクセスしたり、 NTFS ファイル権限が設定されたファイルに UNIX ユーザがアクセスしたりできるように、ネームマッピングを使用して設定する必要があります。ネームマッピングは、暗黙的なマッピング、変換ルール、およびデフォルトユーザを任意に組み合わせて設定できます。 
---
= UNIX と Windows のユーザ名をマッピング
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
Windows と UNIX の両方のユーザアカウントが混在するサイトでは、 UNIX ファイル権限が設定されたファイルに Windows ユーザがアクセスしたり、 NTFS ファイル権限が設定されたファイルに UNIX ユーザがアクセスしたりできるように、ネームマッピングを使用して設定する必要があります。ネームマッピングは、暗黙的なマッピング、変換ルール、およびデフォルトユーザを任意に組み合わせて設定できます。

.このタスクについて
この手順は、 Windows と UNIX のユーザアカウントが暗黙的にマッピングされない場合にのみ使用します。小文字の Windows ユーザ名が UNIX ユーザ名と一致していれば、ユーザ名は暗黙的にマッピングされます。マッピングには、 NIS 、 LDAP 、またはローカルユーザを使用できます。一致しない 2 組のユーザセットがある場合、ネームマッピングを設定する必要があります。

.手順
. 次の点を考慮して、ネームマッピングの方法を決めます。ネームマッピングの変換ルール、デフォルトユーザマッピング、またはその両方。
+
** 変換ルールでは、正規表現を使用してユーザ名を変換します。この方法は、ユーザ単位でアクセスを制御したり追跡したりする場合に便利です。
+
たとえば、 UNIX ユーザとドメインの Windows ユーザを双方向にマッピングできます。

** デフォルトユーザを使用すると、暗黙的なマッピングやネームマッピングの変換ルールでマッピングされないすべてのユーザにユーザ名を割り当てることができます。
+
SVM には、デフォルトの UNIX ユーザ「 pcuser 」が設定されていますが、デフォルトの Windows ユーザは設定されていません。



. SVMs ウィンドウに移動します。
. 設定する SVM を選択します。
. SVM の設定 * タブをクリックします。
. *オプション*：UNIXユーザアカウントとWindowsユーザアカウントを双方向に変換するネームマッピングを作成します。
+
.. [* Host Users and Groups] ペインで、 [* 名前のマッピング * ] をクリックします。
.. [ * 追加 ] をクリックし、デフォルトの * Windows から UNIX* 方向を維持してから、 Windows ユーザーが UNIX ファイルアクセス権を使用するファイルにアクセスしようとしたときに UNIX 資格情報を生成する正規表現を作成します。
+
次のエントリでは、 ENG ドメイン内のすべての Windows ユーザが同じ名前の UNIX ユーザに変換されます。パターン `ENG\\(.+)` というプレフィックスが付いたWindowsユーザ名を検索します。 `ENG\\`、および交換 `\1` ユーザ名以外をすべて削除してUNIXバージョンを作成します。

+
image::../media/name_mappings_1_windows_to_unix.gif[Windows から UNIX へのエントリのスクリーンショット]

.. [** 追加 ] をクリックし、 UNIX から Windows * への方向を選択し、 UNIX ユーザーが NTFS ファイルアクセス権を持つファイルにアクセスしようとしたときに Windows 資格情報を生成する対応するマッピングを作成します。
+
次のエントリでは、すべての UNIX ユーザが ENG ドメイン内の同じ名前の Windows ユーザに変換されます。パターン `(.+)` 任意のUNIX名を検索し、 `ENG\\\1` を挿入してWindowsバージョンを作成します。 `ENG\\` ユーザ名の前。

+
image::../media/name_mappings_2_unix_to_windows.gif[UNIX から Windows へのエントリのスクリーンショット]

.. ルールが適用される順序は各ルールの位置によって決まるため、結果を参照して、想定した順序になっていることを確認する必要があります。
+
image::../media/name_mappings_3_outcome.gif[この図には説明が付随しています。]

.. 手順5bから5dを繰り返して、SVMのすべてのドメインと名前をマッピングします。


. *オプション*：デフォルトのWindowsユーザーを作成します。
+
.. LDAP ユーザ、 NIS ユーザ、または SVM のローカルユーザのいずれかとして、 Windows ユーザアカウントを作成します。
+
ローカルユーザーを使用する場合は、 [ ホストユーザーとグループ ] ウィンドウ枠の *Windows* の下にアカウントを作成できます。

.. デフォルトの Windows ユーザを設定するには、 [* Protocols] ペインで *NFS*>*Edit* を選択し、ユーザ名を入力します。


+
たとえば、「 unixusers 」という名前のローカル Windows ユーザを作成し、デフォルトの Windows ユーザとして設定できます。

. *任意*：デフォルト値である「pcuser」ユーザとは異なるユーザを使用する場合は、デフォルトのUNIXユーザを設定します。
+
.. LDAP ユーザ、 NIS ユーザ、または SVM のローカルユーザのいずれかとして、 UNIX ユーザアカウントを作成します。
+
ローカルユーザーを使用する場合は、 [ ホストユーザーとグループ ] ウィンドウ枠の [*UNIX* ] の下にアカウントを作成できます。

.. デフォルトの UNIX ユーザを設定するには、「 * Protocols * 」ペインで * cifs * > * Options * を選択し、ユーザ名を入力します。


+
「 winusers 」という名前のローカル UNIX ユーザを作成し、デフォルトの UNIX ユーザとして設定できます。





== 次に何をするか

デフォルトユーザを設定した場合は、あとでワークフローでファイル権限を設定するときに、デフォルトの Windows ユーザとデフォルトの UNIX ユーザに権限を設定する必要があります。
